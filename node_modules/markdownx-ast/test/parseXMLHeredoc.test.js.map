{"version":3,"sources":["webpack:///webpack/bootstrap 294e3b092db5ef0f2524","webpack:///./parseXMLHeredoc.test.ts","webpack:///external \"chai\"","webpack:///./parseXMLHeredoc.ts"],"names":[],"mappings":"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","file":"parseXMLHeredoc.test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 294e3b092db5ef0f2524\n **/","\"use strict\";\nconst chai_1 = require(\"chai\");\nconst parseXMLHeredoc_1 = require(\"./parseXMLHeredoc\");\ndescribe(\"parseXMLHeredoc\", () => {\n    let result;\n    let remainder;\n    describe(\"tag with content\", () => {\n        before(() => {\n            const input = \"<abc a='1' b=\\\"2\\\" c>content</abc>abcd\";\n            [result, remainder] = parseXMLHeredoc_1.parseXMLHeredoc(input);\n        });\n        it(\"parses tag name\", () => {\n            chai_1.assert.equal(result.tag, \"abc\");\n        });\n        it(\"parses attributes\", () => {\n            chai_1.assert.deepEqual(result.attrs, {\n                a: \"1\",\n                b: \"2\",\n                c: true,\n            });\n        });\n        it(\"parses content\", () => {\n            chai_1.assert.deepEqual(result.content, \"content\");\n        });\n        it(\"returns raw html\", () => {\n            chai_1.assert.equal(result.raw, \"<abc a='1' b=\\\"2\\\" c>content</abc>\");\n        });\n        it(\"returns unparsed remainder\", () => {\n            chai_1.assert.equal(remainder, \"abcd\");\n        });\n    });\n    describe(\"self-closing tag\", () => {\n        before(() => {\n            const input = \"<abc a='1' b=\\\"2\\\" c/>\";\n            [result, remainder] = parseXMLHeredoc_1.parseXMLHeredoc(input);\n        });\n        it(\"has no content\", () => {\n            chai_1.assert.isUndefined(result.content);\n        });\n        it(\"returns raw html\", () => {\n            chai_1.assert.equal(result.raw, \"<abc a='1' b=\\\"2\\\" c/>\");\n        });\n    });\n    describe(\"self-closing tag with no attrbiutes\", () => {\n        before(() => {\n            const input = \"<abc/>abcd\";\n            [result, remainder] = parseXMLHeredoc_1.parseXMLHeredoc(input);\n        });\n        it(\"is empty\", () => {\n            chai_1.assert.isUndefined(result.content);\n            chai_1.assert.deepEqual(result.attrs, {});\n        });\n        it(\"returns raw html\", () => {\n            chai_1.assert.equal(result.raw, \"<abc/>\");\n        });\n        it(\"returns unparsed remainder\", () => {\n            chai_1.assert.equal(remainder, \"abcd\");\n        });\n    });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./parseXMLHeredoc.test.ts\n **/","module.exports = require(\"chai\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chai\"\n ** module id = 1\n ** module chunks = 0 1\n **/","// Adapted from http://erik.eae.net/simplehtmlparser/simplehtmlparser.js\n// Also see: http://ejohn.org/blog/pure-javascript-html-parser/\n\"use strict\";\nexports.startTagRE = /^<([-A-Za-z0-9_]+)((?:\\s+\\w+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/;\nconst endTagRE = /^<\\/([-A-Za-z0-9_]+)[^>]*>/;\nconst attrRE = /([-A-Za-z0-9_]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\nfunction parseXMLHeredoc(input) {\n    let raw;\n    let remainder = \"\";\n    const matches = input.match(exports.startTagRE);\n    if (!matches) {\n        return;\n    }\n    raw = matches[0];\n    // console.log(matches);\n    const tagName = matches[1];\n    const tagAttributesString = matches[2] || \"\";\n    const isSelfClosing = matches[3] === '/';\n    let content;\n    if (!isSelfClosing) {\n        const closeTag = `</${tagName}>`;\n        const end = input.lastIndexOf(closeTag);\n        content = input.slice(matches[0].length, end);\n        raw += content + closeTag;\n        remainder = input.substring(end + closeTag.length);\n    }\n    else {\n        remainder = input.substring(matches[0].length);\n    }\n    const attrs = parseAttributes(tagAttributesString);\n    const xml = {\n        tag: tagName,\n        attrs: attrs,\n        content: content,\n        raw: raw,\n    };\n    return [xml, remainder];\n}\nexports.parseXMLHeredoc = parseXMLHeredoc;\nfunction parseAttributes(input) {\n    const attrs = {};\n    input.replace(attrRE, function (a0, a1, a2, a3) {\n        const key = a1;\n        let value = a2 || a3 || true;\n        attrs[key] = value;\n        return \"\";\n    });\n    return attrs;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./parseXMLHeredoc.ts\n **/"],"sourceRoot":""}